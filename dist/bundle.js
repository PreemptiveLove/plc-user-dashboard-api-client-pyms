var Treehouse=function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=9)}([function(t,e,r){"use strict";var n=r(2),i="object"==typeof self&&self&&self.Object===Object&&self,s=n.a||i||Function("return this")();e.a=s},function(t,e,r){"use strict";(function(t){var n=r(2),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=i&&"object"==typeof t&&t&&!t.nodeType&&t,o=s&&s.exports===i&&n.a.process,a=function(){try{var t=s&&s.require&&s.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();e.a=a}).call(this,r(5)(t))},function(t,e,r){"use strict";(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.a=r}).call(this,r(11))},function(t,e,r){"use strict";(function(t){var n=r(0),i=r(6),s="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=s&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===s?n.a.Buffer:void 0,c=(a?a.isBuffer:void 0)||i.a;e.a=c}).call(this,r(5)(t))},function(t,e,r){"use strict";(function(t){var r={green:[32,39],cyan:[36,39],magenta:[35,39],bold:[1,22]};e.a=function(t,e){if(n()){var i=r[t];return"["+i[0]+"m"+e+"["+i[1]+"m"}return e};var n=function(){return void 0===typeof window&&!!/^screen|^xterm|^vt100|color|ansi|cygwin|linux/i.test(t.env.TERM)}}).call(this,r(10))},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,r){"use strict";e.a=function(){return!1}},function(t,e,r){"use strict";(function(t){var n=r(0),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=i&&"object"==typeof t&&t&&!t.nodeType&&t,o=s&&s.exports===i?n.a.Buffer:void 0,a=o?o.allocUnsafe:void 0;e.a=function(t,e){if(e)return t.slice();var r=t.length,n=a?a(r):new t.constructor(r);return t.copy(n),n}}).call(this,r(5)(t))},function(t,e,r){var n;t.exports=((n=function(){this.listeners={}}).prototype={addEventListener:function(t,e,r){for(var n=[],i=arguments.length,s=0;s<i;s++)n.push(arguments[s]);n=n.length>3?n.splice(3,n.length-1):[],void 0!==this.listeners[t]?this.listeners[t].push({scope:r,callback:e,args:n}):this.listeners[t]=[{scope:r,callback:e,args:n}]},removeEventListener:function(t,e,r){if(void 0!==this.listeners[t]){for(var n=this.listeners[t].length,i=[],s=0;s<n;s++){var o=this.listeners[t][s];o.scope==r&&o.callback==e||i.push(o)}this.listeners[t]=i}},hasEventListener:function(t,e,r){if(void 0!==this.listeners[t]){var n=this.listeners[t].length;if(void 0===e&&void 0===r)return n>0;for(var i=0;i<n;i++){var s=this.listeners[t][i];if((!r||s.scope==r)&&s.callback==e)return!0}}return!1},dispatch:function(t,e){for(var r={type:t,target:e},n=[],i=arguments.length,s=0;s<i;s++)n.push(arguments[s]);if(n=n.length>2?n.splice(2,n.length-1):[],n=[r].concat(n),void 0!==this.listeners[t]){var o=this.listeners[t].slice(),a=o.length;for(s=0;s<a;s++){var c=o[s];if(c&&c.callback){var u=n.concat(c.args);c.callback.apply(c.scope,u)}}}},getEvents:function(){var t="";for(var e in this.listeners)for(var r=this.listeners[e].length,n=0;n<r;n++){var i=this.listeners[e][n];t+=i.scope&&i.scope.className?i.scope.className:"anonymous",t+=" listen for '"+e+"'\n"}return t}},new n)},function(t,e,r){"use strict";var n=r(15);const i=r(12),s=n.SpraypaintBase.extend({static:{jwtStorage:"plcJwt",baseUrl:"",apiNamespace:"",generateAuthHeader:function(t){return"Bearer "+t}}}),o=s.extend({static:{jsonapiType:"plc_users"},attrs:{plcTransactions:(0,n.hasMany)(),plcSubscriptions:(0,n.hasMany)(),firstName:(0,n.attr)(),lastName:(0,n.attr)(),email:(0,n.attr)(),password:(0,n.attr)(),facebook:(0,n.attr)(),firstDonationDate:(0,n.attr)({persist:!1}),gender:(0,n.attr)(),hasOptedOutOfEmail:(0,n.attr)(),instagram:(0,n.attr)(),lastDonationDate:(0,n.attr)({persist:!1}),linkedin:(0,n.attr)(),mailOptOut:(0,n.attr)(),mailingCity:(0,n.attr)(),mailingCountry:(0,n.attr)(),mailingPostalCode:(0,n.attr)(),mailingState:(0,n.attr)(),mailingStreet:(0,n.attr)(),maritalStatus:(0,n.attr)(),middleName:(0,n.attr)(),mobilePhone:(0,n.attr)(),parentalStatus:(0,n.attr)(),phone:(0,n.attr)(),religion:(0,n.attr)(),title:(0,n.attr)(),twitter:(0,n.attr)(),birthdate:(0,n.attr)(),firstPurchaseDate:(0,n.attr)({persist:!1}),firstTransactionDate:(0,n.attr)({persist:!1}),gravatarDigest:(0,n.attr)({persist:!1})}}),a=s.extend({static:{jsonapiType:"plc_transactions"},attrs:{plcUser:(0,n.belongsTo)(),plcSubscription:(0,n.belongsTo)(),plcCampaign:(0,n.belongsTo)(),plcLineItems:(0,n.hasMany)(),amount:(0,n.attr)({persist:!1}),closeDate:(0,n.attr)({persist:!1}),digitalWalletService:(0,n.attr)({persist:!1}),isClosed:(0,n.attr)({persist:!1}),isWon:(0,n.attr)({persist:!1}),isRefund:(0,n.attr)({persist:!1}),shopifyDiscountAmount:(0,n.attr)({persist:!1}),shopifyDiscountCode:(0,n.attr)({persist:!1}),stageName:(0,n.attr)({persist:!1}),taxDeductibleAmount:(0,n.attr)({persist:!1}),transactionType:(0,n.attr)({persist:!1}),stripeTransactionId:(0,n.attr)({persist:!1}),authorizeTransactionId:(0,n.attr)({persist:!1}),paypalTransactionId:(0,n.attr)({persist:!1}),shopifyTransactionId:(0,n.attr)({persist:!1}),belongsToSubscription:(0,n.attr)({persist:!1})}}),c=s.extend({static:{jsonapiType:"plc_subscriptions"},attrs:{plcPaymentMethod:(0,n.hasOne)(),plcUser:(0,n.belongsTo)(),plcCampaign:(0,n.belongsTo)(),cancelDate:(0,n.attr)({persist:!1}),amount:(0,n.attr)(),dateEstablished:(0,n.attr)({persist:!1}),installments:(0,n.attr)({persist:!1}),lastPaymentDate:(0,n.attr)({persist:!1}),nextPaymentDate:(0,n.attr)(),openEndedStatus:(0,n.attr)(),paymentProcessor:(0,n.attr)({persist:!1}),cancellationReasonDescription:(0,n.attr)(),cancellationReason:(0,n.attr)()}}),u=s.extend({static:{jsonapiType:"plc_products"},attrs:{isActive:(0,n.attr)({persist:!1}),isDonation:(0,n.attr)({persist:!1}),isProduct:(0,n.attr)({persist:!1}),isRefugeeMade:(0,n.attr)({persist:!1}),productCode:(0,n.attr)({persist:!1}),sku:(0,n.attr)({persist:!1}),name:(0,n.attr)({persist:!1})}}),p=s.extend({static:{jsonapiType:"plc_line_items"},attrs:{plcTransaction:(0,n.belongsTo)(),plcProduct:(0,n.belongsTo)(),isDonation:(0,n.attr)({persist:!1}),isProduct:(0,n.attr)({persist:!1}),listPrice:(0,n.attr)({persist:!1}),name:(0,n.attr)({persist:!1}),productCode:(0,n.attr)({persist:!1}),quantity:(0,n.attr)({persist:!1}),taxableAmount:(0,n.attr)({persist:!1}),totalPrice:(0,n.attr)({persist:!1}),unitPrice:(0,n.attr)({persist:!1})}}),l=s.extend({static:{jsonapiType:"plc_campaigns"},attrs:{plcTransactions:(0,n.hasMany)(),plcSubscriptions:(0,n.hasMany)(),endDate:(0,n.attr)({persist:!1}),isActive:(0,n.attr)({persist:!1}),name:(0,n.attr)({persist:!1}),startDate:(0,n.attr)({persist:!1}),originatingLandingPage:(0,n.attr)({persist:!1}),uniqueName:(0,n.attr)({persist:!1}),displayName:(0,n.attr)({persist:!1})}}),f=s.extend({static:{jsonapiType:"plc_payment_methods"},attrs:{plcSubscriptions:(0,n.belongsTo)(),stripeCustomerId:(0,n.attr)({persist:!1}),stripeSourceId:(0,n.attr)({persist:!1}),addressCity:(0,n.attr)({persist:!1}),addressCountry:(0,n.attr)({persist:!1}),addressLine1:(0,n.attr)({persist:!1}),addressLine2:(0,n.attr)({persist:!1}),addressState:(0,n.attr)({persist:!1}),addressZip:(0,n.attr)({persist:!1}),brand:(0,n.attr)({persist:!1}),country:(0,n.attr)({persist:!1}),expirationMonth:(0,n.attr)({persist:!1}),expirationYear:(0,n.attr)({persist:!1}),last4:(0,n.attr)({persist:!1}),bankName:(0,n.attr)({persist:!1}),routingNumber:(0,n.attr)({persist:!1}),updateToken:(0,n.attr)()}}),h=t=>{s.baseUrl=t,o.baseUrl=t,l.baseUrl=t,p.baseUrl=t,f.baseUrl=t,u.baseUrl=t,c.baseUrl=t,a.baseUrl=t};t.exports={authenticate:(t,e)=>{const r={method:"POST",body:JSON.stringify({email:t,password:e}),headers:{"Content-Type":"application/json"},credentials:"same-origin"};return console.log(r),fetch(`${s.baseUrl}/plc_user_tokens`,r).then(t=>new Promise((e,r)=>t.ok?t.json().then(t=>{const r=t.plcJwt;localStorage.setItem("plcJwt",r),e({jwt:r})}):t.json().then(t=>{r(t)})))},authenticateFromUrl:t=>{const e=new URL(t).searchParams.get("plcJwt");return new Promise((t,r)=>{null!=e?(localStorage.setItem("plcJwt",e),t({jwt:e})):r(!1)})},isAuthenticated:()=>{let t=!1;const e=localStorage.getItem("plcJwt");if(null!=e){const r=i(e),n=Date.now().valueOf()/1e3;void 0===r.exp||n<r.exp?t=!0:localStorage.removeItem("plcJwt")}return t},requestLoginLink:t=>{const e={method:"POST",body:JSON.stringify({email:t}),headers:{"Content-Type":"application/json"},credentials:"same-origin"};return fetch(`${s.baseUrl}/plc_user_login_links`,e).then(t=>new Promise((e,r)=>t.ok?e(t):r(t)))},resetPassword:(t,e)=>{console.log("resetPassword"),console.log(e);const r=new URL(e).searchParams.get("plcJwt");r||empty(r)||""===r||localStorage.getItem("plcJwt",r);const n={method:"POST",body:JSON.stringify({data:{attributes:{password:t}}}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+r},credentials:"same-origin"};return console.log(n),fetch(`${s.baseUrl}/plc_reset_password`,n).then(t=>new Promise((e,r)=>t.ok?t.json().then(t=>{const r=t.plcJwt;localStorage.setItem("plcJwt",r),e({jwt:r})}):t.json().then(t=>{r(t)})))},logout:()=>localStorage.removeItem("plcJwt"),PlcUser:o,PlcTransaction:a,PlcSubscription:c,PlcProduct:u,PlcLineItem:p,PlcCampaign:l,PlcPaymentMethod:f,setBaseUrl:h,setEnvironment:t=>{h("https://donors-accounts.stg.paymentpreemptivelove.com")}}},function(t,e){var r,n,i=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(t){r=s}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var c,u=[],p=!1,l=-1;function f(){p&&c&&(p=!1,c.length?u=c.concat(u):l=-1,u.length&&h())}function h(){if(!p){var t=a(f);p=!0;for(var e=u.length;e;){for(c=u,u=[];++l<e;)c&&c[l].run();l=-1,e=u.length}c=null,p=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new d(t,e)),1!==u.length||p||a(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";var n=r(13);function i(t){this.message=t}i.prototype=new Error,i.prototype.name="InvalidTokenError",t.exports=function(t,e){if("string"!=typeof t)throw new i("Invalid token specified");var r=!0===(e=e||{}).header?0:1;try{return JSON.parse(n(t.split(".")[r]))}catch(t){throw new i("Invalid token specified: "+t.message)}},t.exports.InvalidTokenError=i},function(t,e,r){var n=r(14);t.exports=function(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(t){return decodeURIComponent(n(t).replace(/(.)/g,(function(t,e){var r=e.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(e)}catch(t){return n(e)}}},function(t,e){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function n(t){this.message=t}n.prototype=new Error,n.prototype.name="InvalidCharacterError",t.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,s,o=0,a=0,c="";s=e.charAt(a++);~s&&(i=o%4?64*i+s:s,o++%4)?c+=String.fromCharCode(255&i>>(-2*o&6)):0)s=r.indexOf(s);return c}},function(t,e,r){"use strict";r.r(e);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};function i(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var s=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};function o(t,e,r,n){var i,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,r,o):i(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o}function a(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){t.done?i(t.value):new r((function(e){e(t.value)})).then(o,a)}c((n=n.apply(t,e||[])).next())}))}function c(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=n[2&s[0]?"return":s[0]?"throw":"next"])&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[0,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}var u,p=function(){function t(t,e){this.model=t,this.payload=e}return t.apply=function(e,r){new t(e,r).apply()},t.prototype.apply=function(){var t=this,e={};this.payload.errors&&(this.payload.errors.forEach((function(r){var n=r.meta,i=n.relationship;i?t._processRelationship(t.model,i,r):t._processResource(e,n,r)})),this.model.errors=e)},t.prototype._processResource=function(t,e,r){var n=this.model.klass.deserializeKey(e.attribute);t[n]={title:r.title,code:r.code,attribute:e.attribute,message:e.message,fullMessage:"base"===n?e.message:r.detail,rawPayload:r}},t.prototype._processRelationship=function(t,e,r){var n=t[e.name];if(Array.isArray(n)&&(n=n.find((function(t){return t.id===e.id||t.temp_id===e["temp-id"]}))),e.relationship)this._processRelationship(n,e.relationship,r);else{var i={};this._processResource(i,e,r);var s={};Object.keys(n.errors).forEach((function(t){s[t]=n.errors[t]})),Object.keys(i).forEach((function(t){var e=i[t];void 0!==e&&(s[t]=e)})),n.errors=s}},t}(),l=function(t,e){var r=e.headers.get("X-JWT");r&&t.setJWT(r)},f=r(4),h=function(){function t(t,e){this.middleware=t,this.logger=e}return t.prototype.get=function(t,e){return e.method="GET",this._fetchWithLogging(t,e)},t.prototype.post=function(t,e,r){return r.method="POST",r.body=JSON.stringify(e),this._fetchWithLogging(t,r)},t.prototype.patch=function(t,e,r){return r.method="PATCH",r.body=JSON.stringify(e),this._fetchWithLogging(t,r)},t.prototype.delete=function(t,e){return e.method="DELETE",this._fetchWithLogging(t,e)},t.prototype._logRequest=function(t,e){this.logger.info(Object(f.a)("cyan",t+": ")+Object(f.a)("magenta",e))},t.prototype._logResponse=function(t){this.logger.debug(Object(f.a)("bold",JSON.stringify(t,null,4)))},t.prototype._fetchWithLogging=function(t,e){return a(this,void 0,void 0,(function(){var r;return c(this,(function(n){switch(n.label){case 0:return this._logRequest(e.method||"UNDEFINED METHOD",t),[4,this._fetch(t,e)];case 1:return r=n.sent(),this._logResponse(r.jsonPayload),[2,r]}}))}))},t.prototype._fetch=function(t,e){return a(this,void 0,void 0,(function(){var r,n;return c(this,(function(i){switch(i.label){case 0:try{this.middleware.beforeFetch(t,e)}catch(r){throw new d("beforeFetch failed; review middleware.beforeFetch stack",t,e,r)}i.label=1;case 1:return i.trys.push([1,3,,4]),[4,fetch(t,e)];case 2:return r=i.sent(),[3,4];case 3:throw n=i.sent(),new y(null,n.message,n);case 4:return[4,this._handleResponse(r,e)];case 5:return i.sent(),[2,r]}}))}))},t.prototype._handleResponse=function(t,e){return a(this,void 0,void 0,(function(){var r,n;return c(this,(function(i){switch(i.label){case 0:if("DELETE"===e.method&&[202,204,200].indexOf(t.status)>-1)return[2];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t.json()];case 2:return r=i.sent(),[3,4];case 3:throw n=i.sent(),new y(t,"invalid json",n);case 4:try{this.middleware.afterFetch(t,r)}catch(e){throw new y(t,"afterFetch failed; review middleware.afterFetch stack",e)}if(t.status>=500)throw new y(t,"Server Error");if(422!==t.status&&void 0===r.data)throw 404===t.status?new y(t,"record not found"):new y(t,"invalid json");return t.jsonPayload=r,[2]}}))}))},t}(),d=function(t){function e(e,r,n,i){var s=t.call(this,e)||this;return s.stack=i.stack,s.url=r,s.options=n,s.originalError=i,s}return i(e,t),e}(Error),y=function(t){function e(e,r,n){var i=t.call(this,r||"Invalid Response")||this;return i.response=e,i.originalError=n,i}return i(e,t),e}(Error),b=function(){function t(e){this.dct={};var r=this._parseIncludeArgs(e);for(var n in r)r.hasOwnProperty(n)&&(this.dct[n]=new t(r[n]))}return t.prototype.toScopeObject=function(){var t={};for(var e in this.dct)this.dct.hasOwnProperty(e)&&(t[e]=this.dct[e].toScopeObject());return t},t.prototype.toString=function(){var t=[],e=function(e){if(r.dct.hasOwnProperty(e)){var n=r.dct[e].toString();if(""===n)t.push(e);else{var i=n.split(",");i=i.map((function(t){return e+"."+t})),t.push(i.join(","))}}},r=this;for(var n in this.dct)e(n);return t.join(",")},t.prototype._parseIncludeArgs=function(t){if(Array.isArray(t))return this._parseArray(t);if("string"==typeof t){var e={};return e[t]={},e}return"object"==typeof t?this._parseObject(t):{}},t.prototype._parseObject=function(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=this._parseIncludeArgs(t[r]));return e},t.prototype._parseArray=function(t){for(var e={},r=0,n=t;r<n.length;r++){var i=n[r],s=this._parseIncludeArgs(i);for(var o in s)s.hasOwnProperty(o)&&(e[o]=s[o])}return e},t}(),v=0,g=function(){return"temp-id-"+ ++v},m=function(){function t(t,e,r){void 0===r&&(r=!1),this.included=[],this.idOnly=!1;var n=new b(e);if(this.includeDirective=n.toScopeObject(),this.model=t,this.idOnly=r,!t.klass.jsonapiType)throw new Error("Cannot serialize model: Undefined jsonapiType");this.jsonapiType=t.klass.jsonapiType}return t.prototype.attributes=function(){var t=this,e={};return this._eachAttribute((function(r,n){t.model.isPersisted&&!t.model.changes()[r]||(e[t.model.klass.serializeKey(r)]=n)})),e},t.prototype.removeDeletions=function(t,e){var r=this;Object.keys(e).forEach((function(n){var i=e[n],s=t,o=s[n];if(o)if(Array.isArray(o))o.forEach((function(t,e){t.isMarkedForDestruction||t.isMarkedForDisassociation?s[n].splice(e,1):r.removeDeletions(t,i)}));else{var a=o;a.isMarkedForDestruction||a.isMarkedForDisassociation?s[n]=null:r.removeDeletions(a,i)}}))},t.prototype.postProcess=function(){this.removeDeletions(this.model,this.includeDirective),this.model.resetRelationTracking(this.includeDirective)},t.prototype.relationships=function(){var t=this,e={};return Object.keys(this.includeDirective).forEach((function(r){var n,i=t.includeDirective[r],s=!1;r.indexOf(".")>-1&&(r=r.split(".")[0],s=!0);var o=t.model[r];o&&(Array.isArray(o)?(n=[],o.forEach((function(e){(s||t.model.hasDirtyRelation(r,e)||e.isDirty(i))&&n.push(t._processRelatedModel(e,i,s))})),0===n.length&&(n=null)):(s||t.model.hasDirtyRelation(r,o)||o.isDirty(i))&&(n=t._processRelatedModel(o,i,s)),n&&(e[t.model.klass.serializeKey(r)]={data:n}))})),e},t.prototype.asJSON=function(){var t={type:this.jsonapiType};if(this.model.id&&(t.id=this.model.id),this.model.temp_id&&(t["temp-id"]=this.model.temp_id),!this.idOnly){var e=this.attributes();Object.keys(e).length>0&&(t.attributes=e)}var r=this.relationships();Object.keys(r).length>0&&(t.relationships=r);var n={data:t};return this.included.length>0&&(n.included=this.included),n},t.prototype._processRelatedModel=function(e,r,n){var i=this;e.clearErrors(),e.isPersisted||(e.temp_id=g());var s=new t(e,r,n),o=s.asJSON().data;return this._pushInclude(o),s.included.forEach((function(t){i._pushInclude(t)})),this._resourceIdentifierFor(e)},t.prototype._resourceIdentifierFor=function(t){if(!t.klass.jsonapiType)throw new Error("Cannot serialize model: Undefined jsonapiType for model "+t);var e,r={type:t.klass.jsonapiType};return t.id&&(r.id=t.id),t.temp_id&&(r["temp-id"]=t.temp_id),e=t.isPersisted?t.isMarkedForDestruction?"destroy":t.isMarkedForDisassociation?"disassociate":"update":"create",r.method=e,r},t.prototype._pushInclude=function(t){this._isIncluded(t)||this.included.push(t)},t.prototype._isIncluded=function(t){return this.included.forEach((function(e){if(e.type===t.type&&(e.id===t.id||e["temp-id"]===t["temp-id"]))return!0})),!1},t.prototype._eachAttribute=function(t){var e=this,r=this.model.typedAttributes;Object.keys(r).forEach((function(n){if(e.model.klass.attributeList[n].persist){var i=r[n];t(n,i)}}))},t}(),_=function(){function t(){this._data={}}return t.prototype.getItem=function(t){return this._data[t]||null},t.prototype.setItem=function(t,e){this._data[t]=e},t.prototype.removeItem=function(t){delete this._data[t]},t}();try{u=localStorage}catch(t){u=new _}var w=function(){function t(t,e){void 0===e&&(e=u),this._jwtKey=t,this._backend=e}return Object.defineProperty(t.prototype,"backend",{get:function(){return this._backend},enumerable:!0,configurable:!0}),t.prototype.getJWT=function(){return this._backend.getItem(this._jwtKey)||void 0},t.prototype.setJWT=function(t){t?this._backend.setItem(this._jwtKey,t):this._backend.removeItem(this._jwtKey)},t}();var j=function(){this.__data__=[],this.size=0};var O=function(t,e){return t===e||t!=t&&e!=e};var k=function(t,e){for(var r=t.length;r--;)if(O(t[r][0],e))return r;return-1},P=Array.prototype.splice;var S=function(t){var e=this.__data__,r=k(e,t);return!(r<0)&&(r==e.length-1?e.pop():P.call(e,r,1),--this.size,!0)};var A=function(t){var e=this.__data__,r=k(e,t);return r<0?void 0:e[r][1]};var T=function(t){return k(this.__data__,t)>-1};var x=function(t,e){var r=this.__data__,n=k(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function $(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}$.prototype.clear=j,$.prototype.delete=S,$.prototype.get=A,$.prototype.has=T,$.prototype.set=x;var E=$;var R=function(){this.__data__=new E,this.size=0};var C=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r};var D=function(t){return this.__data__.get(t)};var I=function(t){return this.__data__.has(t)},F=r(0),U=F.a.Symbol,M=Object.prototype,z=M.hasOwnProperty,L=M.toString,J=U?U.toStringTag:void 0;var N=function(t){var e=z.call(t,J),r=t[J];try{t[J]=void 0;var n=!0}catch(t){}var i=L.call(t);return n&&(e?t[J]=r:delete t[J]),i},B=Object.prototype.toString;var W=function(t){return B.call(t)},K="[object Null]",q="[object Undefined]",G=U?U.toStringTag:void 0;var H=function(t){return null==t?void 0===t?q:K:G&&G in Object(t)?N(t):W(t)};var Z=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},V="[object AsyncFunction]",Q="[object Function]",Y="[object GeneratorFunction]",X="[object Proxy]";var tt,et=function(t){if(!Z(t))return!1;var e=H(t);return e==Q||e==Y||e==V||e==X},rt=F.a["__core-js_shared__"],nt=(tt=/[^.]+$/.exec(rt&&rt.keys&&rt.keys.IE_PROTO||""))?"Symbol(src)_1."+tt:"";var it=function(t){return!!nt&&nt in t},st=Function.prototype.toString;var ot=function(t){if(null!=t){try{return st.call(t)}catch(t){}try{return t+""}catch(t){}}return""},at=/^\[object .+?Constructor\]$/,ct=Function.prototype,ut=Object.prototype,pt=ct.toString,lt=ut.hasOwnProperty,ft=RegExp("^"+pt.call(lt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ht=function(t){return!(!Z(t)||it(t))&&(et(t)?ft:at).test(ot(t))};var dt=function(t,e){return null==t?void 0:t[e]};var yt=function(t,e){var r=dt(t,e);return ht(r)?r:void 0},bt=yt(F.a,"Map"),vt=yt(Object,"create");var gt=function(){this.__data__=vt?vt(null):{},this.size=0};var mt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},_t="__lodash_hash_undefined__",wt=Object.prototype.hasOwnProperty;var jt=function(t){var e=this.__data__;if(vt){var r=e[t];return r===_t?void 0:r}return wt.call(e,t)?e[t]:void 0},Ot=Object.prototype.hasOwnProperty;var kt=function(t){var e=this.__data__;return vt?void 0!==e[t]:Ot.call(e,t)},Pt="__lodash_hash_undefined__";var St=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=vt&&void 0===e?Pt:e,this};function At(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}At.prototype.clear=gt,At.prototype.delete=mt,At.prototype.get=jt,At.prototype.has=kt,At.prototype.set=St;var Tt=At;var xt=function(){this.size=0,this.__data__={hash:new Tt,map:new(bt||E),string:new Tt}};var $t=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var Et=function(t,e){var r=t.__data__;return $t(e)?r["string"==typeof e?"string":"hash"]:r.map};var Rt=function(t){var e=Et(this,t).delete(t);return this.size-=e?1:0,e};var Ct=function(t){return Et(this,t).get(t)};var Dt=function(t){return Et(this,t).has(t)};var It=function(t,e){var r=Et(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function Ft(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ft.prototype.clear=xt,Ft.prototype.delete=Rt,Ft.prototype.get=Ct,Ft.prototype.has=Dt,Ft.prototype.set=It;var Ut=Ft,Mt=200;var zt=function(t,e){var r=this.__data__;if(r instanceof E){var n=r.__data__;if(!bt||n.length<Mt-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Ut(n)}return r.set(t,e),this.size=r.size,this};function Lt(t){var e=this.__data__=new E(t);this.size=e.size}Lt.prototype.clear=R,Lt.prototype.delete=C,Lt.prototype.get=D,Lt.prototype.has=I,Lt.prototype.set=zt;var Jt=Lt;var Nt=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t},Bt=function(){try{var t=yt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var Wt=function(t,e,r){"__proto__"==e&&Bt?Bt(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},Kt=Object.prototype.hasOwnProperty;var qt=function(t,e,r){var n=t[e];Kt.call(t,e)&&O(n,r)&&(void 0!==r||e in t)||Wt(t,e,r)};var Gt=function(t,e,r,n){var i=!r;r||(r={});for(var s=-1,o=e.length;++s<o;){var a=e[s],c=n?n(r[a],t[a],a,r,t):void 0;void 0===c&&(c=t[a]),i?Wt(r,a,c):qt(r,a,c)}return r};var Ht=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n};var Zt=function(t){return null!=t&&"object"==typeof t},Vt="[object Arguments]";var Qt=function(t){return Zt(t)&&H(t)==Vt},Yt=Object.prototype,Xt=Yt.hasOwnProperty,te=Yt.propertyIsEnumerable,ee=Qt(function(){return arguments}())?Qt:function(t){return Zt(t)&&Xt.call(t,"callee")&&!te.call(t,"callee")},re=Array.isArray,ne=r(3),ie=9007199254740991,se=/^(?:0|[1-9]\d*)$/;var oe=function(t,e){var r=typeof t;return!!(e=null==e?ie:e)&&("number"==r||"symbol"!=r&&se.test(t))&&t>-1&&t%1==0&&t<e},ae=9007199254740991;var ce=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=ae},ue={};ue["[object Float32Array]"]=ue["[object Float64Array]"]=ue["[object Int8Array]"]=ue["[object Int16Array]"]=ue["[object Int32Array]"]=ue["[object Uint8Array]"]=ue["[object Uint8ClampedArray]"]=ue["[object Uint16Array]"]=ue["[object Uint32Array]"]=!0,ue["[object Arguments]"]=ue["[object Array]"]=ue["[object ArrayBuffer]"]=ue["[object Boolean]"]=ue["[object DataView]"]=ue["[object Date]"]=ue["[object Error]"]=ue["[object Function]"]=ue["[object Map]"]=ue["[object Number]"]=ue["[object Object]"]=ue["[object RegExp]"]=ue["[object Set]"]=ue["[object String]"]=ue["[object WeakMap]"]=!1;var pe=function(t){return Zt(t)&&ce(t.length)&&!!ue[H(t)]};var le=function(t){return function(e){return t(e)}},fe=r(1),he=fe.a&&fe.a.isTypedArray,de=he?le(he):pe,ye=Object.prototype.hasOwnProperty;var be=function(t,e){var r=re(t),n=!r&&ee(t),i=!r&&!n&&Object(ne.a)(t),s=!r&&!n&&!i&&de(t),o=r||n||i||s,a=o?Ht(t.length,String):[],c=a.length;for(var u in t)!e&&!ye.call(t,u)||o&&("length"==u||i&&("offset"==u||"parent"==u)||s&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||oe(u,c))||a.push(u);return a},ve=Object.prototype;var ge=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ve)};var me=function(t,e){return function(r){return t(e(r))}},_e=me(Object.keys,Object),we=Object.prototype.hasOwnProperty;var je=function(t){if(!ge(t))return _e(t);var e=[];for(var r in Object(t))we.call(t,r)&&"constructor"!=r&&e.push(r);return e};var Oe=function(t){return null!=t&&ce(t.length)&&!et(t)};var ke=function(t){return Oe(t)?be(t):je(t)};var Pe=function(t,e){return t&&Gt(e,ke(e),t)};var Se=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e},Ae=Object.prototype.hasOwnProperty;var Te=function(t){if(!Z(t))return Se(t);var e=ge(t),r=[];for(var n in t)("constructor"!=n||!e&&Ae.call(t,n))&&r.push(n);return r};var xe=function(t){return Oe(t)?be(t,!0):Te(t)};var $e=function(t,e){return t&&Gt(e,xe(e),t)},Ee=r(7);var Re=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e};var Ce=function(t,e){for(var r=-1,n=null==t?0:t.length,i=0,s=[];++r<n;){var o=t[r];e(o,r,t)&&(s[i++]=o)}return s};var De=function(){return[]},Ie=Object.prototype.propertyIsEnumerable,Fe=Object.getOwnPropertySymbols,Ue=Fe?function(t){return null==t?[]:(t=Object(t),Ce(Fe(t),(function(e){return Ie.call(t,e)})))}:De;var Me=function(t,e){return Gt(t,Ue(t),e)};var ze=function(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t},Le=me(Object.getPrototypeOf,Object),Je=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)ze(e,Ue(t)),t=Le(t);return e}:De;var Ne=function(t,e){return Gt(t,Je(t),e)};var Be=function(t,e,r){var n=e(t);return re(t)?n:ze(n,r(t))};var We=function(t){return Be(t,ke,Ue)};var Ke=function(t){return Be(t,xe,Je)},qe=yt(F.a,"DataView"),Ge=yt(F.a,"Promise"),He=yt(F.a,"Set"),Ze=yt(F.a,"WeakMap"),Ve=ot(qe),Qe=ot(bt),Ye=ot(Ge),Xe=ot(He),tr=ot(Ze),er=H;(qe&&"[object DataView]"!=er(new qe(new ArrayBuffer(1)))||bt&&"[object Map]"!=er(new bt)||Ge&&"[object Promise]"!=er(Ge.resolve())||He&&"[object Set]"!=er(new He)||Ze&&"[object WeakMap]"!=er(new Ze))&&(er=function(t){var e=H(t),r="[object Object]"==e?t.constructor:void 0,n=r?ot(r):"";if(n)switch(n){case Ve:return"[object DataView]";case Qe:return"[object Map]";case Ye:return"[object Promise]";case Xe:return"[object Set]";case tr:return"[object WeakMap]"}return e});var rr=er,nr=Object.prototype.hasOwnProperty;var ir=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&nr.call(t,"index")&&(r.index=t.index,r.input=t.input),r},sr=F.a.Uint8Array;var or=function(t){var e=new t.constructor(t.byteLength);return new sr(e).set(new sr(t)),e};var ar=function(t,e){var r=e?or(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)},cr=/\w*$/;var ur=function(t){var e=new t.constructor(t.source,cr.exec(t));return e.lastIndex=t.lastIndex,e},pr=U?U.prototype:void 0,lr=pr?pr.valueOf:void 0;var fr=function(t){return lr?Object(lr.call(t)):{}};var hr=function(t,e){var r=e?or(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)},dr="[object Boolean]",yr="[object Date]",br="[object Map]",vr="[object Number]",gr="[object RegExp]",mr="[object Set]",_r="[object String]",wr="[object Symbol]",jr="[object ArrayBuffer]",Or="[object DataView]",kr="[object Float32Array]",Pr="[object Float64Array]",Sr="[object Int8Array]",Ar="[object Int16Array]",Tr="[object Int32Array]",xr="[object Uint8Array]",$r="[object Uint8ClampedArray]",Er="[object Uint16Array]",Rr="[object Uint32Array]";var Cr=function(t,e,r){var n=t.constructor;switch(e){case jr:return or(t);case dr:case yr:return new n(+t);case Or:return ar(t,r);case kr:case Pr:case Sr:case Ar:case Tr:case xr:case $r:case Er:case Rr:return hr(t,r);case br:return new n;case vr:case _r:return new n(t);case gr:return ur(t);case mr:return new n;case wr:return fr(t)}},Dr=Object.create,Ir=function(){function t(){}return function(e){if(!Z(e))return{};if(Dr)return Dr(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();var Fr=function(t){return"function"!=typeof t.constructor||ge(t)?{}:Ir(Le(t))},Ur="[object Map]";var Mr=function(t){return Zt(t)&&rr(t)==Ur},zr=fe.a&&fe.a.isMap,Lr=zr?le(zr):Mr,Jr="[object Set]";var Nr=function(t){return Zt(t)&&rr(t)==Jr},Br=fe.a&&fe.a.isSet,Wr=Br?le(Br):Nr,Kr=1,qr=2,Gr=4,Hr="[object Arguments]",Zr="[object Function]",Vr="[object GeneratorFunction]",Qr="[object Object]",Yr={};Yr[Hr]=Yr["[object Array]"]=Yr["[object ArrayBuffer]"]=Yr["[object DataView]"]=Yr["[object Boolean]"]=Yr["[object Date]"]=Yr["[object Float32Array]"]=Yr["[object Float64Array]"]=Yr["[object Int8Array]"]=Yr["[object Int16Array]"]=Yr["[object Int32Array]"]=Yr["[object Map]"]=Yr["[object Number]"]=Yr[Qr]=Yr["[object RegExp]"]=Yr["[object Set]"]=Yr["[object String]"]=Yr["[object Symbol]"]=Yr["[object Uint8Array]"]=Yr["[object Uint8ClampedArray]"]=Yr["[object Uint16Array]"]=Yr["[object Uint32Array]"]=!0,Yr["[object Error]"]=Yr[Zr]=Yr["[object WeakMap]"]=!1;var Xr=function t(e,r,n,i,s,o){var a,c=r&Kr,u=r&qr,p=r&Gr;if(n&&(a=s?n(e,i,s,o):n(e)),void 0!==a)return a;if(!Z(e))return e;var l=re(e);if(l){if(a=ir(e),!c)return Re(e,a)}else{var f=rr(e),h=f==Zr||f==Vr;if(Object(ne.a)(e))return Object(Ee.a)(e,c);if(f==Qr||f==Hr||h&&!s){if(a=u||h?{}:Fr(e),!c)return u?Ne(e,$e(a,e)):Me(e,Pe(a,e))}else{if(!Yr[f])return s?e:{};a=Cr(e,f,c)}}o||(o=new Jt);var d=o.get(e);if(d)return d;if(o.set(e,a),Wr(e))return e.forEach((function(i){a.add(t(i,r,n,i,e,o))})),a;if(Lr(e))return e.forEach((function(i,s){a.set(s,t(i,r,n,s,e,o))})),a;var y=p?u?Ke:We:u?keysIn:ke,b=l?void 0:y(e);return Nt(b||e,(function(i,s){b&&(i=e[s=i]),qt(a,s,t(i,r,n,s,e,o))})),a},tn=1,en=4;var rn=function(t){return Xr(t,tn|en)},nn=r(8),sn=function(){function t(){this.data={}}return Object.defineProperty(t.prototype,"count",{get:function(){return Object.keys(this.data).length},enumerable:!0,configurable:!0}),t.prototype.find=function(t,e){return void 0===e&&(e=null),e||(e=t.storeKey),this.data[e]},t.prototype.findAll=function(t){var e=this,r=[];return t.forEach((function(t){var n=e.find(t);n&&r.push(n)})),r},t.prototype.create=function(t,e){t.storeKey=e,t.stale=!1,this.data[e]=rn(t.attributes)},t.prototype.updateOrCreate=function(t){if(t.storeKey)this.create(t,t.storeKey);else{var e=this.keyFor(t);this.create(t,e)}nn.dispatch(t.storeKey,{},this.data[t.storeKey])},t.prototype.destroy=function(t){t.stale=!0,delete this.data[t.storeKey]},t.prototype.keyFor=function(t){return t.klass.jsonapiType+"-"+t.id},t}(),on=function(){function t(t,e){this._deserialized=[],this._resources=[],this.registry=t,this.payload=e,this.addResources(e.data),this.addResources(e.included)}return t.prototype.addResources=function(t){if(t)if(Array.isArray(t))for(var e=0,r=t;e<r.length;e++){var n=r[e];this._resources.push(n)}else this._resources.push(t)},t.prototype.instanceFor=function(t){var e=this.registry.get(t);if(!e)throw new Error('Unknown type "'+t+'"');return new e},t.prototype.relationshipInstanceFor=function(t,e){var r=e.find((function(e){return!(e.klass.jsonapiType!==t.type||!(e.id&&t.id&&e.id===t.id||e.temp_id&&t["temp-id"]&&e.temp_id===t["temp-id"]))}));return r||(r=this.instanceFor(t.type)),r},t.prototype.lookupAssociated=function(t,e){return t.find((function(t){return!(t.klass.jsonapiType!==e.klass.jsonapiType||!(t.temp_id&&e.temp_id&&t.temp_id===e.temp_id||t.id&&e.id&&t.id===e.id))}))},t.prototype.pushRelation=function(t,e,r){var n=t,i=n[e];this.lookupAssociated(i,r)||n[e].push(r)},t.prototype.deserialize=function(t){var e=this.instanceFor(t.type);return this.deserializeInstance(e,t,{})},t.prototype.deserializeInstance=function(t,e,r){void 0===r&&(r={});var n=this.alreadyDeserialized(e);return n||(t.id=e.id,t.temp_id=e["temp-id"],t.assignAttributes(e.attributes),t.setMeta(e.meta),this._deserialized.push(t),this._processRelationships(t,e.relationships||{},r),this._removeDeletions(t,r),t.isPersisted=!0,t.reset(),t)},t.prototype._removeDeletions=function(t,e){var r=this;Object.keys(e).forEach((function(n){var i=t,s=i[n];if(s)if(Array.isArray(s))s.forEach((function(t,s){t.isMarkedForDestruction?i.klass.store.destroy(t):t.isMarkedForDisassociation?i[n].splice(s,1):r._removeDeletions(t,e[n]||{})}));else{var o=s;o.isMarkedForDestruction?i.klass.store.destroy(o):o.isMarkedForDisassociation?i[n]=null:r._removeDeletions(o,e[n]||{})}}))},t.prototype._processRelationships=function(t,e,r){var n=this;this._iterateValidRelationships(t,e,(function(e,i){var s=r[e],o=t;if(Array.isArray(i))for(var a=0,c=i;a<c.length;a++){var u=c[a],p=n.findResource(u),l=o[e],f=n.relationshipInstanceFor(p,l);f=n.deserializeInstance(f,p,s),n.pushRelation(t,e,f)}else{p=n.findResource(i);var h=o[e],d=h||n.instanceFor(p.type);d=n.deserializeInstance(d,p,s),h||(o[e]=d)}}))},t.prototype._iterateValidRelationships=function(t,e,r){for(var n in e)if(e.hasOwnProperty(n)){var i=t.klass.deserializeKey(n);if(t.klass.attributeList[i]){var s=e[n].data;if(!s)continue;r(i,s)}}},t.prototype.alreadyDeserialized=function(t){return this._deserialized.find((function(e){return!(e.klass.jsonapiType!==t.type||!(e.id&&t.id&&e.id===t.id||e.temp_id&&t.temp_id&&e.temp_id===t["temp-id"]))}))},t.prototype.findResource=function(t){return this._resources.find((function(e){return!(e.type!==t.type||!(e.id&&t.id&&e.id===t.id||e["temp-id"]&&t["temp-id"]&&e["temp-id"]===t["temp-id"]))}))||t},t}(),an=function(){function t(t){this.model=t}return t.prototype.checkRelation=function(t,e){var r=!1;e.isPersisted&&((this.model._originalRelationships[t]||[]).find((function(t){return JSON.stringify(t)===JSON.stringify(e.resourceIdentifier)}))||(r=!0));return r},t.prototype.check=function(t){void 0===t&&(t={});var e=new b(t).toScopeObject();return this._hasDirtyAttributes()||this._hasDirtyRelationships(e)||this.model.isMarkedForDestruction||this.model.isMarkedForDisassociation||this._isUnpersisted()},t.prototype.dirtyAttributes=function(){for(var t={},e=0,r=Object.keys(this.model.attributes);e<r.length;e++){var n=r[e],i=this.model._originalAttributes[n],s=this.model.attributes[n];this.model.isPersisted?i!==s&&(t[n]=[i,s]):t[n]=[null,s]}return t},t.prototype._isUnpersisted=function(){return!this.model.isPersisted&&JSON.stringify(this.model.attributes)!==JSON.stringify({})},t.prototype._hasDirtyAttributes=function(){var t=this.model._originalAttributes,e=this.model.attributes;return JSON.stringify(t)!==JSON.stringify(e)},t.prototype._hasDirtyRelationships=function(t){var e=this,r=!1;return this._eachRelatedObject(t,(function(t,n,i){n.isDirty(i)&&(r=!0),e.checkRelation(t,n)&&(r=!0)})),r},t.prototype._eachRelatedObject=function(t,e){var r=this;Object.keys(t).forEach((function(n){var i=t[n],s=r.model[n];Array.isArray(s)||(s=[s]),s.forEach((function(t){t&&e(n,t,i)}))}))},t}(),cn=function(t,e){var r=[];for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];null!=i&&""!==i&&(e&&(n=e+"["+n+"]"),Array.isArray(i)?i.length>0&&r.push(n+"="+i.join(",")):"object"==typeof i?r.push(cn(i,n)):r.push(n+"="+i))}return(r=r.filter((function(t){return!!t}))).join("&")},un=function(){function t(t,e){void 0===e&&(e={data:[]}),this._collection=t,this._raw_json=e}return Object.defineProperty(t.prototype,"raw",{get:function(){return this._raw_json},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._collection},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"meta",{get:function(){return this.raw.meta||{}},enumerable:!0,configurable:!0}),t}(),pn=function(){function t(t,e){this._record=t,this._raw_json=e}return Object.defineProperty(t.prototype,"raw",{get:function(){return this._raw_json},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._record},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"meta",{get:function(){return this.raw.meta||{}},enumerable:!0,configurable:!0}),t}(),ln=function(){function t(t){this._raw_json=t}return Object.defineProperty(t.prototype,"raw",{get:function(){return this._raw_json},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"meta",{get:function(){return this.raw.meta||{}},enumerable:!0,configurable:!0}),t}(),fn=function(){function t(t){this._associations={},this._pagination={},this._filter={},this._sort={},this._fields={},this._extra_fields={},this._include={},this._stats={},this._extraParams={},this.model=t}return t.prototype.all=function(){return a(this,void 0,void 0,(function(){var t;return c(this,(function(e){switch(e.label){case 0:return[4,this._fetch(this.model.url())];case 1:return t=e.sent(),[2,this._buildCollectionResult(t)]}}))}))},t.prototype.find=function(t){return a(this,void 0,void 0,(function(){var e;return c(this,(function(r){switch(r.label){case 0:return[4,this._fetch(this.model.url(t))];case 1:return e=r.sent(),[2,this._buildRecordResult(e)]}}))}))},t.prototype.first=function(){return a(this,void 0,void 0,(function(){var t,e;return c(this,(function(r){switch(r.label){case 0:return[4,(t=this.per(1))._fetch(t.model.url())];case 1:return e=r.sent(),[2,this._buildRecordResult(e)]}}))}))},t.prototype.merge=function(t){var e=this.copy();return Object.keys(t).forEach((function(r){e._associations[r]=t[r]})),e},t.prototype.page=function(t){var e=this.copy();return e._pagination.number=t,e},t.prototype.per=function(t){var e=this.copy();return e._pagination.size=t,e},t.prototype.where=function(t){var e=this.copy();for(var r in t)t.hasOwnProperty(r)&&(e._filter[r]=t[r]);return e},t.prototype.extraParams=function(t){var e=this.copy();for(var r in t)t.hasOwnProperty(r)&&(e._extraParams[r]=t[r]);return e},t.prototype.stats=function(t){var e=this.copy();for(var r in t)t.hasOwnProperty(r)&&(e._stats[r]=t[r]);return e},t.prototype.order=function(t){var e=this.copy();if("object"==typeof t)for(var r in t)t.hasOwnProperty(r)&&(e._sort[r]=t[r]);else e._sort[t]="asc";return e},t.prototype.select=function(t){var e=this.copy();if(Array.isArray(t)){var r=t,n=this.model.jsonapiType;e._fields[n]=r}else for(var i in t)t.hasOwnProperty(i)&&(e._fields[i]=t[i]);return e},t.prototype.selectExtra=function(t){var e=this.copy();if(Array.isArray(t)){var r=t,n=this.model.jsonapiType;e._extra_fields[n]=r}else for(var i in t)t.hasOwnProperty(i)&&(e._extra_fields[i]=t[i]);return e},t.prototype.includes=function(t){var e=this.copy(),r=new b(t).toScopeObject();for(var n in r)r.hasOwnProperty(n)&&(e._include[n]=r[n]);return e},t.prototype.scope=function(){return this},t.prototype.asQueryParams=function(){var t=this,e={page:this._pagination,filter:this._filter,sort:this._sortParam(this._sort)||[],fields:this._fields,extra_fields:this._extra_fields,stats:this._stats,include:new b(this._include).toString()};return this._mergeAssociationQueryParams(e,this._associations),Object.keys(this._extraParams).forEach((function(r){e[r]=t._extraParams[r]})),e},t.prototype.toQueryParams=function(){var t=cn(this.asQueryParams());if(""!==t)return t},t.prototype.copy=function(){return rn(this)},t.prototype._mergeAssociationQueryParams=function(t,e){var r=this,n=function(n){if(e.hasOwnProperty(n)){var i=e[n].asQueryParams();t.page[n]=i.page,t.filter[n]=i.filter,t.stats[n]=i.stats,Object.assign(t.fields,i.fields),Object.assign(t.extra_fields,i.extra_fields),i.sort.forEach((function(e){var i=r._transformAssociationSortParam(n,e);t.sort.push(i)}))}};for(var i in e)n(i)},t.prototype._transformAssociationSortParam=function(t,e){return-1!==e.indexOf("-")&&(e=e.replace("-",""),t="-"+t),t+"."+e},t.prototype._sortParam=function(t){if(t&&Object.keys(t).length>0){var e=[];for(var r in t)t.hasOwnProperty(r)&&("asc"!==t[r]&&(r="-"+r),e.push(r));return e}},t.prototype._fetch=function(t){return a(this,void 0,void 0,(function(){var e,r,n,i;return c(this,(function(s){switch(s.label){case 0:return(e=this.toQueryParams())&&(t=t+"?"+e),r=new h(this.model.middlewareStack,this.model.logger),n=this.model.fetchOptions(),[4,r.get(t,n)];case 1:return i=s.sent(),l(this.model,i),[2,i.jsonPayload]}}))}))},t.prototype._buildRecordResult=function(t){var e,r;if(t.data instanceof Array){if(!(r=t.data[0]))return new ln(t)}else r=t.data;return e=this.model.fromJsonapi(r,t),new pn(e,t)},t.prototype._buildCollectionResult=function(t){var e=this,r=[];return t.data.forEach((function(n){r.push(e.model.fromJsonapi(n,t))})),new un(r,t)},t}(),hn=function(){function t(t){this._typeMap={},this._baseClass=t}return t.prototype.register=function(t,e){if(this._typeMap[t])throw new Error('Type "'+t+'" already registered on base class '+this._baseClass);this._typeMap[t]=e},t.prototype.get=function(t){return this._typeMap[t]},t}(),dn=Object.prototype.toString;function yn(t){return"[object Function]"===dn.call(t)}var bn=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},vn=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function gn(t){return t.split("").map((function(t){return"(?:"+t.toUpperCase()+"|"+t.toLowerCase()+")"})).join("")}function mn(t,e){for(var r=t.length-1;r>=0;r--)t[r]===e&&Array.prototype.splice.call(t,r,1)}function _n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var wn={},jn=function(){function t(){bn(this,t),this.plurals=[],this.singulars=[],this.uncountables=[],this.humans=[],this.acronyms={},this.acronymRegex=/(?=a)b/}return vn(t,null,[{key:"getInstance",value:function(e){return wn[e]=wn[e]||new t,wn[e]}}]),vn(t,[{key:"acronym",value:function(t){this.acronyms[t.toLowerCase()]=t;var e=[];for(var r in this.acronyms)_n(this.acronyms,r)&&e.push(this.acronyms[r]);this.acronymRegex=new RegExp(e.join("|"))}},{key:"plural",value:function(t,e){"string"==typeof t&&mn(this.uncountables,t),mn(this.uncountables,e),this.plurals.unshift([t,e])}},{key:"singular",value:function(t,e){"string"==typeof t&&mn(this.uncountables,t),mn(this.uncountables,e),this.singulars.unshift([t,e])}},{key:"irregular",value:function(t,e){mn(this.uncountables,t),mn(this.uncountables,e);var r=t[0],n=t.substr(1),i=e[0],s=e.substr(1);if(r.toUpperCase()===i.toUpperCase())this.plural(new RegExp("("+r+")"+n+"$","i"),"$1"+s),this.plural(new RegExp("("+i+")"+s+"$","i"),"$1"+s),this.singular(new RegExp("("+r+")"+n+"$","i"),"$1"+n),this.singular(new RegExp("("+i+")"+s+"$","i"),"$1"+n);else{var o=gn(n),a=gn(s);this.plural(new RegExp(r.toUpperCase()+o+"$"),i.toUpperCase()+s),this.plural(new RegExp(r.toLowerCase()+o+"$"),i.toLowerCase()+s),this.plural(new RegExp(i.toUpperCase()+a+"$"),i.toUpperCase()+s),this.plural(new RegExp(i.toLowerCase()+a+"$"),i.toLowerCase()+s),this.singular(new RegExp(r.toUpperCase()+o+"$"),r.toUpperCase()+n),this.singular(new RegExp(r.toLowerCase()+o+"$"),r.toLowerCase()+n),this.singular(new RegExp(i.toUpperCase()+a+"$"),r.toUpperCase()+n),this.singular(new RegExp(i.toLowerCase()+a+"$"),r.toLowerCase()+n)}}},{key:"uncountable",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];this.uncountables=this.uncountables.concat(e)}},{key:"human",value:function(t,e){this.humans.unshift([t,e])}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";"all"===t?(this.plurals=[],this.singulars=[],this.uncountables=[],this.humans=[]):this[t]=[]}}]),t}();var On={en:function(t){t.plural(/$/,"s"),t.plural(/s$/i,"s"),t.plural(/^(ax|test)is$/i,"$1es"),t.plural(/(octop|vir)us$/i,"$1i"),t.plural(/(octop|vir)i$/i,"$1i"),t.plural(/(alias|status)$/i,"$1es"),t.plural(/(bu)s$/i,"$1ses"),t.plural(/(buffal|tomat)o$/i,"$1oes"),t.plural(/([ti])um$/i,"$1a"),t.plural(/([ti])a$/i,"$1a"),t.plural(/sis$/i,"ses"),t.plural(/(?:([^f])fe|([lr])f)$/i,"$1$2ves"),t.plural(/(hive)$/i,"$1s"),t.plural(/([^aeiouy]|qu)y$/i,"$1ies"),t.plural(/(x|ch|ss|sh)$/i,"$1es"),t.plural(/(matr|vert|ind)(?:ix|ex)$/i,"$1ices"),t.plural(/^(m|l)ouse$/i,"$1ice"),t.plural(/^(m|l)ice$/i,"$1ice"),t.plural(/^(ox)$/i,"$1en"),t.plural(/^(oxen)$/i,"$1"),t.plural(/(quiz)$/i,"$1zes"),t.singular(/s$/i,""),t.singular(/(ss)$/i,"$1"),t.singular(/(n)ews$/i,"$1ews"),t.singular(/([ti])a$/i,"$1um"),t.singular(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)(sis|ses)$/i,"$1sis"),t.singular(/(^analy)(sis|ses)$/i,"$1sis"),t.singular(/([^f])ves$/i,"$1fe"),t.singular(/(hive)s$/i,"$1"),t.singular(/(tive)s$/i,"$1"),t.singular(/([lr])ves$/i,"$1f"),t.singular(/([^aeiouy]|qu)ies$/i,"$1y"),t.singular(/(s)eries$/i,"$1eries"),t.singular(/(m)ovies$/i,"$1ovie"),t.singular(/(x|ch|ss|sh)es$/i,"$1"),t.singular(/^(m|l)ice$/i,"$1ouse"),t.singular(/(bus)(es)?$/i,"$1"),t.singular(/(o)es$/i,"$1"),t.singular(/(shoe)s$/i,"$1"),t.singular(/(cris|test)(is|es)$/i,"$1is"),t.singular(/^(a)x[ie]s$/i,"$1xis"),t.singular(/(octop|vir)(us|i)$/i,"$1us"),t.singular(/(alias|status)(es)?$/i,"$1"),t.singular(/^(ox)en/i,"$1"),t.singular(/(vert|ind)ices$/i,"$1ex"),t.singular(/(matr)ices$/i,"$1ix"),t.singular(/(quiz)zes$/i,"$1"),t.singular(/(database)s$/i,"$1"),t.irregular("person","people"),t.irregular("man","men"),t.irregular("child","children"),t.irregular("sex","sexes"),t.irregular("move","moves"),t.irregular("zombie","zombies"),t.uncountable("equipment","information","rice","money","species","series","fish","sheep","jeans","police")}};function kn(t,e){if(yn(t)&&(e=t,t=null),t=t||"en",!e)return jn.getInstance(t);e(jn.getInstance(t))}for(var Pn in On)kn(Pn,On[Pn]);function Sn(t,e){var r,n,i,s=""+t;if(0===s.length)return s;var o=s.toLowerCase().match(/\b\w+$/);if(o&&kn().uncountables.indexOf(o[0])>-1)return s;for(var a=0,c=e.length;a<c;a++)if(n=(r=e[a])[0],i=r[1],s.match(n)){s=s.replace(n,i);break}return s}function An(t){return Sn(t,kn(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en").plurals)}function Tn(t){var e=null==t?"":String(t);return e.charAt(0).toUpperCase()+e.slice(1)}function xn(t,e){null==e&&(e=!0);var r=""+t;return r=(r=e?r.replace(/^[a-z\d]*/,(function(t){return kn().acronyms[t]||Tn(t)})):r.replace(new RegExp("^(?:"+kn().acronymRegex.source+"(?=\\b|[A-Z_])|\\w)"),(function(t){return t.toLowerCase()}))).replace(/(?:_|(\/))([a-z\d]*)/gi,(function(t,e,r,n,i){return e||(e=""),""+e+(kn().acronyms[r]||Tn(r))}))}function $n(t){var e=""+t;return(e=(e=(e=(e=e.replace(new RegExp("(?:([A-Za-z\\d])|^)("+kn().acronymRegex.source+")(?=\\b|[^a-z])","g"),(function(t,e,r){return(e||"")+(e?"_":"")+r.toLowerCase()}))).replace(/([A-Z\d]+)([A-Z][a-z])/g,"$1_$2")).replace(/([a-z\d])([A-Z])/g,"$1_$2")).replace(/-/g,"_")).toLowerCase()}function En(t){return t.replace(/_/g,"-")}var Rn,Cn={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","×":"x","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","Þ":"Th","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","þ":"th","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Ĉ":"C","ĉ":"c","Ċ":"C","ċ":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"D","đ":"d","Ē":"E","ē":"e","Ĕ":"E","ĕ":"e","Ė":"E","ė":"e","Ę":"E","ę":"e","Ě":"E","ě":"e","Ĝ":"G","ĝ":"g","Ğ":"G","ğ":"g","Ġ":"G","ġ":"g","Ģ":"G","ģ":"g","Ĥ":"H","ĥ":"h","Ħ":"H","ħ":"h","Ĩ":"I","ĩ":"i","Ī":"I","ī":"i","Ĭ":"I","ĭ":"i","Į":"I","į":"i","İ":"I","ı":"i","Ĳ":"IJ","ĳ":"ij","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","ĺ":"l","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ŀ":"L","ŀ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","ŉ":"'n","Ŋ":"NG","ŋ":"ng","Ō":"O","ō":"o","Ŏ":"O","ŏ":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ŗ":"R","ŗ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ŝ":"S","ŝ":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ŧ":"T","ŧ":"t","Ũ":"U","ũ":"u","Ū":"U","ū":"u","Ŭ":"U","ŭ":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z"},Dn={};!function(){function t(){for(var e in bn(this,t),this.approximations={},Cn)this.approximate(e,Cn[e])}vn(t,null,[{key:"getInstance",value:function(e){return Dn[e]=Dn[e]||new t,Dn[e]}}]),vn(t,[{key:"approximate",value:function(t,e){this.approximations[t]=e}},{key:"transliterate",value:function(t,e){var r=this;return t.replace(/[^\u0000-\u007f]/g,(function(t){return r.approximations[t]||e||"?"}))}}])}();!function(t){t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error"}(Rn||(Rn={}));var In={debug:1,info:2,warn:3,error:4},Fn=new(function(){function t(t){void 0===t&&(t="warn"),this._level=Rn.info,"number"==typeof t?this._level=t:this.level=t}return t.prototype.debug=function(t){this._level<=Rn.debug&&console.info(t)},t.prototype.info=function(t){this._level<=Rn.info&&console.info(t)},t.prototype.warn=function(t){this._level<=Rn.warn&&console.warn(t)},t.prototype.error=function(t){this._level<=Rn.warn&&console.error(t)},Object.defineProperty(t.prototype,"level",{get:function(){var t;for(t in Rn){if(Rn.hasOwnProperty(t))if(Rn[t]===this._level)return t}throw new Error("Invalid log level: "+this._level)},set:function(t){var e=Rn[t];if(!e)throw new Error("Log level must be one of "+Object.keys(In).join(", "));this._level=e},enumerable:!0,configurable:!0}),t}()),Un=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e=[]),this._beforeFilters=[],this._afterFilters=[],this._beforeFilters=t,this._afterFilters=e}return Object.defineProperty(t.prototype,"beforeFilters",{get:function(){return this._beforeFilters},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"afterFilters",{get:function(){return this._afterFilters},enumerable:!0,configurable:!0}),t.prototype.beforeFetch=function(t,e){this._beforeFilters.forEach((function(r){r(t,e)}))},t.prototype.afterFetch=function(t,e){this._afterFilters.forEach((function(r){r(t,e)}))},t}(),Mn=function(t,e){Object.defineProperty(t,e,{get:function(){},set:function(t){Object.defineProperty(this,e,{value:t,writable:!0,configurable:!0,enumerable:!1})},configurable:!0,enumerable:!1})},zn=function(t,e){var r;for(r in(e=s({},e)).credentialStorageBackend&&(t.credentialStorageBackend=e.credentialStorageBackend,delete e.jwtStorage),e.jwtStorage&&(t.jwtStorage=e.jwtStorage,delete e.jwtStorage),e.jwt&&(t.setJWT(e.jwt),delete e.jwt),e)e.hasOwnProperty(r)&&(t[r]=e[r]);void 0===t.isBaseClass?t.setAsBase():!0===t.isBaseClass&&(t.isBaseClass=!1)},Ln=function(){function t(t){this.stale=!1,this.storeKey="",this.relationships={},this._persisted=!1,this._markedForDestruction=!1,this._markedForDisassociation=!1,this._originalRelationships={},this._errors={},this._initializeAttributes(),this.assignAttributes(t),this._originalAttributes=rn(this._attributes),this._originalRelationships=this.relationshipResourceIdentifiers(Object.keys(this.relationships))}return Object.defineProperty(t,"credentialStorage",{get:function(){return this._credentialStorage},enumerable:!0,configurable:!0}),Object.defineProperty(t,"jwtStorage",{get:function(){return this._jwtStorage},set:function(t){t!==this._jwtStorage&&(this._jwtStorage=t,this.credentialStorageBackend=this._credentialStorageBackend)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"credentialStorageBackend",{get:function(){return this._credentialStorageBackend},set:function(t){this._credentialStorageBackend=t,this._credentialStorage=new w(this.jwtStorage||"jwt",this._credentialStorageBackend)},enumerable:!0,configurable:!0}),t.initializeCredentialStorage=function(){this.jwtStorage&&"undefined"!=typeof localStorage?this.credentialStorageBackend=localStorage:this.credentialStorageBackend=new _},t.fromJsonapi=function(t,e){return function(t,e,r){return new on(t,r).deserialize(e)}(this.typeRegistry,t,e)},t.inherited=function(t){t.parentClass=this,t.currentClass=t,t.prototype.klass=t,t.attributeList=rn(t.attributeList)},t.setAsBase=function(){this.isBaseClass=!0,this.jsonapiType=void 0,this.typeRegistry||(this.typeRegistry=new hn(this)),this.middlewareStack||(this._middlewareStack=new Un),this._IDMap||(this._IDMap=new sn)},t.isSubclassOf=function(t){for(var e=this.currentClass;e;){if(e===t)return!0;e=e.parentClass}return!1},Object.defineProperty(t,"baseClass",{get:function(){for(var t=this.currentClass;t;){if(t.isBaseClass)return t;t=t.parentClass}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"store",{get:function(){if(void 0===this.baseClass)throw new Error("No base class for "+this.name);return this.baseClass._IDMap},enumerable:!0,configurable:!0}),Object.defineProperty(t,"typeRegistry",{get:function(){if(void 0===this.baseClass)throw new Error("No base class for "+this.name);return this.baseClass._typeRegistry},set:function(t){if(!this.isBaseClass)throw new Error("Cannot set a registry on a non-base class");this._typeRegistry=t},enumerable:!0,configurable:!0}),t.registerType=function(){if(this.jsonapiType){var t=this.typeRegistry.get(this.jsonapiType);t&&this.isSubclassOf(t)||this.typeRegistry.register(this.jsonapiType,this)}},t.extend=function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(this);this.inherited(e);var r={};if(t.attrs)for(var n in t.attrs)if(t.attrs.hasOwnProperty(n)){var s=t.attrs[n];s.name||(s.name=n),s.owner=e,r[n]=s}if(e.attributeList=Object.assign({},e.attributeList,r),zn(e,t.static||{}),e.registerType(),t.methods)for(var o in t.methods)t.methods.hasOwnProperty(o)&&(e.prototype[o]=t.methods[o]);return e},t.prototype._initializeAttributes=function(){this._attributes={},this._copyPrototypeDescriptors()},t.prototype._copyPrototypeDescriptors=function(){var e=this,r=this.klass.attributeList;for(var n in r)if(r.hasOwnProperty(n)){var i=r[n];Object.defineProperty(this,n,i.descriptor())}["errors","isPersisted","isMarkedForDestruction","isMarkedForDisassociation"].forEach((function(r){var n=Object.getOwnPropertyDescriptor(t.prototype,r);n&&Object.defineProperty(e,r,n)}))},t.prototype.isType=function(t){return this.klass.jsonapiType===t},Object.defineProperty(t.prototype,"isPersisted",{get:function(){return this._persisted},set:function(t){this._persisted=t,t&&this.reset()},enumerable:!0,configurable:!0}),t.prototype.onStoreChange=function(){var t=this;return this._onStoreChange?this._onStoreChange:(this._onStoreChange=function(e,r){var n={};Object.keys(r).forEach((function(e){var i=t,s=t.changes();i[e]===r[e]||s[e]||(n[e]=[i[e],r[e]],i[e]=r[e],i._originalAttributes[e]=r[e])})),Object.keys(n).length>0&&void 0!==t.afterSync&&t.afterSync(n)},this._onStoreChange)},t.prototype.unlisten=function(){var t=this;this.klass.sync&&(this.storeKey&&nn.removeEventListener(this.storeKey,this.onStoreChange()),Object.keys(this.relationships).forEach((function(e){var r=t.relationships[e];r&&(Array.isArray(r)?r.forEach((function(t){return t.unlisten()})):r.unlisten())})))},t.prototype.listen=function(){this.klass.sync&&(this._onStoreChange||nn.addEventListener(this.storeKey,this.onStoreChange()))},t.prototype.reset=function(){this.klass.sync&&(this.klass.store.updateOrCreate(this),this.listen()),this._originalAttributes=rn(this._attributes),this._originalRelationships=this.relationshipResourceIdentifiers(Object.keys(this.relationships))},Object.defineProperty(t.prototype,"isMarkedForDestruction",{get:function(){return this._markedForDestruction},set:function(t){this._markedForDestruction=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isMarkedForDisassociation",{get:function(){return this._markedForDisassociation},set:function(t){this._markedForDisassociation=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){return this._attributes},set:function(t){this._attributes={},this.assignAttributes(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stored",{get:function(){return this.klass.store.find(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"typedAttributes",{get:function(){return this._attributes},enumerable:!0,configurable:!0}),t.prototype.relationship=function(t){return this.relationships[t]},t.prototype.assignAttributes=function(t){if(t)for(var e in t)if(t.hasOwnProperty(e)){var r;if(r=this.klass.deserializeKey(e),"id"===e||this.klass.attributeList[r])this[r]=t[e];else if(this.klass.strictAttributes)throw new Error("Unknown attribute: "+e)}},t.prototype.setMeta=function(t){this.__meta__=t},t.prototype.relationshipResourceIdentifiers=function(t){return function(t,e){var r={};return e.forEach((function(e){var n=t.relationship(e);n&&(Array.isArray(n)||(n=[n]),n.forEach((function(t){t.isPersisted&&(r[e]||(r[e]=[]),r[e].push(t.resourceIdentifier))})))})),r}(this,t)},t.prototype.fromJsonapi=function(t,e,r){return void 0===r&&(r={}),function(t,e,r,n){return void 0===n&&(n={}),new on(t.klass.typeRegistry,r).deserializeInstance(t,e,n)}(this,t,e,r)},Object.defineProperty(t.prototype,"resourceIdentifier",{get:function(){if(void 0===this.klass.jsonapiType)throw new Error("Cannot build resource identifier for class. No JSONAPI Type specified.");return{id:this.id,type:this.klass.jsonapiType}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"errors",{get:function(){return this._errors},set:function(t){this._errors=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasError",{get:function(){return Object.keys(this._errors).length>1},enumerable:!0,configurable:!0}),t.prototype.clearErrors=function(){this.errors={}},t.prototype.isDirty=function(t){return new an(this).check(t)},t.prototype.changes=function(){return new an(this).dirtyAttributes()},t.prototype.hasDirtyRelation=function(t,e){return new an(this).checkRelation(t,e)},t.prototype.dup=function(){var t=Object.assign({},this.attributes,this.relationships),e=new this.klass(t);return e.id=this.id,e.isPersisted=this.isPersisted,e.isMarkedForDestruction=this.isMarkedForDestruction,e.isMarkedForDisassociation=this.isMarkedForDisassociation,e.errors=Object.assign({},this.errors),e},t.fetchOptions=function(){var t,e={headers:(t={Accept:"application/json"},t["Content-Type"]="application/json",t)},r=this.getJWT();return r&&(e.headers.Authorization=this.generateAuthHeader(r)),e},t.url=function(t){var e=this.endpoint||"/"+this.jsonapiType,r=""+this.fullBasePath()+e;return t&&(r=r+"/"+t),r},t.fullBasePath=function(){return""+this.baseUrl+this.apiNamespace},Object.defineProperty(t,"middlewareStack",{get:function(){if(this.baseClass){var t=this.baseClass._middlewareStack;if(this.beforeFetch||this.afterFetch){var e=this.beforeFetch?[this.beforeFetch]:t.beforeFilters,r=this.afterFetch?[this.afterFetch]:t.afterFilters;return new Un(e,r)}return t}return new Un},set:function(t){this._middlewareStack=t},enumerable:!0,configurable:!0}),t.scope=function(){return new fn(this)},t.first=function(){return this.scope().first()},t.all=function(){return this.scope().all()},t.find=function(t){return this.scope().find(t)},t.where=function(t){return this.scope().where(t)},t.page=function(t){return this.scope().page(t)},t.per=function(t){return this.scope().per(t)},t.extraParams=function(t){return this.scope().extraParams(t)},t.order=function(t){return this.scope().order(t)},t.select=function(t){return this.scope().select(t)},t.selectExtra=function(t){return this.scope().selectExtra(t)},t.stats=function(t){return this.scope().stats(t)},t.includes=function(t){return this.scope().includes(t)},t.merge=function(t){return this.scope().merge(t)},t.setJWT=function(t){this.credentialStorage.setJWT(t)},t.getJWT=function(){return this.credentialStorage.getJWT()},Object.defineProperty(t,"jwt",{get:function(){return this.getJWT()},set:function(t){this.setJWT(t)},enumerable:!0,configurable:!0}),t.generateAuthHeader=function(t){return'Token token="'+t+'"'},t.getJWTOwner=function(){return this.logger.warn("SpraypaintBase#getJWTOwner() is deprecated. Use #baseClass property instead"),this.baseClass},t.serializeKey=function(t){switch(this.keyCase.server){case"dash":return En($n(t));case"snake":return $n(t);case"camel":return xn($n(t),!1)}},t.deserializeKey=function(t){switch(this.keyCase.client){case"dash":return En($n(t));case"snake":return $n(t);case"camel":return xn($n(t),!1)}},t.prototype.destroy=function(){return a(this,void 0,void 0,(function(){var t,e,r,n=this;return c(this,(function(i){switch(i.label){case 0:t=this.klass.url(this.id),"delete",e=new h(this._middleware(),this.klass.logger),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e.delete(t,this._fetchOptions())];case 2:return r=i.sent(),[3,4];case 3:throw i.sent();case 4:return this.klass.baseClass.store.destroy(this),[4,this._handleResponse(r,(function(){n.isPersisted=!1}))];case 5:return[2,i.sent()]}}))}))},t.prototype.save=function(t){return void 0===t&&(t={}),a(this,void 0,void 0,(function(){var e,r,n,i,s,o,a=this;return c(this,(function(c){switch(c.label){case 0:e=this.klass.url(),r="post",n=new h(this._middleware(),this.klass.logger),i=new m(this,t.with),this.isPersisted&&(e=this.klass.url(this.id),r="patch"),this.clearErrors(),o=i.asJSON(),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,n[r](e,o,this._fetchOptions())];case 2:return s=c.sent(),[3,4];case 3:throw c.sent();case 4:return[4,this._handleResponse(s,(function(){a.fromJsonapi(s.jsonPayload.data,s.jsonPayload,i.includeDirective),i.postProcess()}))];case 5:return[2,c.sent()]}}))}))},t.prototype._handleResponse=function(t,e){return a(this,void 0,void 0,(function(){return c(this,(function(r){return l(this.klass,t),422===t.status?(p.apply(this,t.jsonPayload),[2,!1]):(e(),[2,!0])}))}))},t.prototype._fetchOptions=function(){return this.klass.fetchOptions()},t.prototype._middleware=function(){return this.klass.middlewareStack},t.prototype.resetRelationTracking=function(t){this._originalRelationships=this.relationshipResourceIdentifiers(Object.keys(t))},t.baseUrl="http://please-set-a-base-url.com",t.apiNamespace="/",t.keyCase={server:"snake",client:"camel"},t.strictAttributes=!1,t.logger=Fn,t.sync=!1,t.attributeList={},t.currentClass=t,t._jwtStorage="jwt",t.isSpraypaintModel=!0,o([Mn],t.prototype,"afterSync",void 0),o([Mn],t.prototype,"relationships",void 0),o([Mn],t.prototype,"klass",void 0),o([Mn],t.prototype,"_persisted",void 0),o([Mn],t.prototype,"_markedForDestruction",void 0),o([Mn],t.prototype,"_markedForDisassociation",void 0),o([Mn],t.prototype,"_originalRelationships",void 0),o([Mn],t.prototype,"_attributes",void 0),o([Mn],t.prototype,"_originalAttributes",void 0),o([Mn],t.prototype,"__meta__",void 0),o([Mn],t.prototype,"_errors",void 0),t}();Ln.prototype.klass=Ln,Ln.initializeCredentialStorage();var Jn=function(t){return!!t&&(t.currentClass&&t.currentClass.isSpraypaintModel)},Nn=function(t){return t||(t={}),new Bn(t)},Bn=function(){function t(t){this.isRelationship=!1,this.type=void 0,this.persist=!0,t&&(t.name&&(this.name=t.name),t.type&&(this.type=t.type),void 0!==t.persist&&(this.persist=!!t.persist))}return t.prototype.apply=function(t){Object.defineProperty(t.prototype,this.name,this.descriptor())},t.prototype.setter=function(t,e){t._attributes[this.name]=e},t.prototype.getter=function(t){return t.attributes[this.name]},t.prototype.descriptor=function(){var t=this;return{configurable:!0,enumerable:!0,get:function(){return t.getter(this)},set:function(e){t.setter(this,e)}}},t}(),Wn=(Object.prototype.toString,function(t){return!!t.klass.sync&&((t.isPersisted||t.stale)&&!t.stored)}),Kn=function(t){function e(e){var r=t.call(this,e)||this;return r.isRelationship=!0,e.jsonapiType&&(r.jsonapiType=e.jsonapiType),r.type&&(r._klass=r.type),r}return i(e,t),Object.defineProperty(e.prototype,"klass",{get:function(){return this._klass||(this._klass=Xn(this,this.jsonapiType)),this._klass},enumerable:!0,configurable:!0}),e.prototype.getter=function(t){var e=t.relationships[this.name];return e&&Wn(e)&&delete t.relationships[this.name],t.relationships[this.name]},e.prototype.setter=function(t,e){e&&!e.hasOwnProperty("isRelationship")?(e instanceof Ln||Array.isArray(e)||(e=new this.klass(e)),t.relationships[this.name]=e):null==e&&(t.relationships[this.name]=e)},e}(Bn),qn=function(t){function e(e){var r=t.call(this,e)||this;return r.isRelationship=!0,e.jsonapiType&&(r.jsonapiType=e.jsonapiType),r.type&&(r._klass=r.type),r}return i(e,t),Object.defineProperty(e.prototype,"klass",{get:function(){return this._klass||(this._klass=Xn(this,this.jsonapiType)),this._klass},enumerable:!0,configurable:!0}),e.prototype.getter=function(t){var e=t.relationships[this.name];if(!e)return this.setter(t,[]),t.relationships[this.name];for(var r=e.length;r--;)if(Wn(e[r])){t.relationships[this.name];e.splice(r,1)}return t.relationships[this.name]},e.prototype.setter=function(t,e){e&&!e.hasOwnProperty("isRelationship")?(e instanceof Ln||Array.isArray(e)||(e=new this.klass(e)),t.relationships[this.name]=e):null==e&&(t.relationships[this.name]=e)},e}(Bn),Gn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(Kn),Hn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(Kn),Zn=function(t){var e=Yn(t);return new Gn(e)},Vn=function(t){var e=Yn(t);return new Hn(e)},Qn=function(t){var e=Yn(t);return new qn(e)},Yn=function(t){var e={};return void 0!==t&&("string"==typeof t?e={jsonapiType:t}:(e={persist:t.persist,name:t.name},"string"==typeof t.type?e.jsonapiType=t.type:e.type=t.type)),e},Xn=function(t,e){var r=t.owner.typeRegistry.get(e);if(r)return r;throw new Error('Unknown type "'+e+'"')},ti="undefined"!=typeof window,ei=!1,ri=function(t){return function(e){return ni(e,t),e}},ni=function(t,e){si(t),zn(t,e||{}),t.jsonapiType||t.isBaseClass||(t.jsonapiType=An($n(t.name)),ei&&ti&&Fn.warn('Inferring model jsonapiType as "'+t.jsonapiType+'".\nYou should explicitly set this on your model if targeting a minified code bundle.')),t.registerType()},ii=function(t,e,r){var n=new Bn({name:e}),i=function(t,e){return si(t),n.name||(n.name=e),t.attributeList[e]=n,n.apply(t),n.descriptor()};if(!(Jn(t)||(s=t,s&&Jn(s.constructor.currentClass))))return t&&(n=new Bn(t)),function(t,e){return i(t.constructor,e)};if(!e)throw new Error("Must provide a propertyKey");var s,o=t;if(!Jn(o))return i(o.constructor,e);r&&(n=new Bn(r)),i(o,e)},si=function(t){t.currentClass!==t&&t.currentClass.inherited(t)},oi=function(t){return function(e,r,n){var i,s=function(e,r){if(void 0===n){var s=An($n(r));i={jsonapiType:s}}else"string"==typeof n?i={jsonapiType:n}:Jn(n)?i={type:n}:(i={persist:n.persist,name:n.name},"string"==typeof n.type?i.jsonapiType=n.type:i.type=n.type);var o=new t(i);o.name||(o.name=r);var a=function(t){return si(t),t}(e.constructor);return a.attributeList[r]=o,o.owner=e.constructor,o.apply(a),o.descriptor()};if(!Jn(e)||!r)return n=e,s;s(e.prototype,r)}},ai=oi(qn),ci=oi(Gn),ui=oi(Hn);r.d(e,"SpraypaintBase",(function(){return Ln})),r.d(e,"Attribute",(function(){return Bn})),r.d(e,"attr",(function(){return Nn})),r.d(e,"hasMany",(function(){return Qn})),r.d(e,"hasOne",(function(){return Zn})),r.d(e,"belongsTo",(function(){return Vn})),r.d(e,"Model",(function(){return ri})),r.d(e,"Attr",(function(){return ii})),r.d(e,"HasMany",(function(){return ai})),r.d(e,"HasOne",(function(){return ci})),r.d(e,"BelongsTo",(function(){return ui})),r.d(e,"MiddlewareStack",(function(){return Un})),r.d(e,"Scope",(function(){return fn}))}]);